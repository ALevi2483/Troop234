<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Photos - Troop 234</title>

  <style>
    :root{
      --bg:#f5f5f5;
      --card:#ffffff;
      --text:#222;
      --muted:#666;
      --brand:#003366;
      --border:#e6e6e6;
      --shadow:0 6px 18px rgba(0,0,0,0.08);
      --radius:14px;
      --max:1100px;
    }

    body{
      margin:0;
      font-family: Arial, sans-serif;
      background:var(--bg);
      color:var(--text);
    }

    /* Page title banner only.
       Your site-wide header/nav (the dark blue one with Join Troop 234, etc.)
       should come from your standard layout on the other pages.
       This file does NOT add a second nav. */
    header{
      background:var(--brand);
      color:#fff;
      padding:2.25rem 1rem;
      text-align:center;
    }

    header h1{
      margin:0;
      font-size:2rem;
      letter-spacing:0.2px;
    }

    header p{
      margin:0.5rem 0 0;
      opacity:0.95;
      font-size:0.95rem;
    }

    main{
      max-width:var(--max);
      margin:0 auto;
      padding:1.25rem 1rem 2.5rem;
    }

    .controls{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:1rem;
      display:flex;
      gap:0.75rem;
      flex-wrap:wrap;
      align-items:flex-end;
      justify-content:space-between;
      margin:0 auto 1rem;
    }

    .controls .left,
    .controls .right{
      display:flex;
      gap:0.75rem;
      flex-wrap:wrap;
      align-items:flex-end;
    }

    label{
      font-size:0.9rem;
      color:var(--muted);
      font-weight:bold;
    }

    select, input[type="search"]{
      padding:0.55rem 0.65rem;
      border:1px solid var(--border);
      border-radius:10px;
      font-size:0.95rem;
      min-width:170px;
      background:#fff;
      color:var(--text);
    }

    input[type="search"]{
      min-width:240px;
    }

    .hint{
      font-size:0.9rem;
      color:var(--muted);
      margin:0.25rem 0 1rem;
    }

    .grid{
      display:grid;
      grid-template-columns:repeat(3, 1fr);
      gap:1rem;
    }

    @media (max-width: 900px){
      .grid{ grid-template-columns:repeat(2, 1fr); }
    }

    @media (max-width: 600px){
      .grid{ grid-template-columns:1fr; }
      select, input[type="search"]{ min-width:100%; }
      .controls{ justify-content:flex-start; }
      .controls .left, .controls .right{ width:100%; }
    }

    .album{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:var(--radius);
      overflow:hidden;
      box-shadow:var(--shadow);
      display:flex;
      flex-direction:column;
      min-height:100%;
    }

    .cover{
      width:100%;
      height:190px;
      background:#ddd;
      object-fit:cover;
      display:block;
    }

    .album-body{
      padding:0.9rem 0.95rem 1rem;
      display:flex;
      flex-direction:column;
      gap:0.5rem;
      flex:1;
    }

    .album-title{
      margin:0;
      font-size:1.05rem;
      color:var(--brand);
    }

    .meta{
      margin:0;
      color:var(--muted);
      font-size:0.9rem;
      line-height:1.25rem;
    }

    .tags{
      display:flex;
      flex-wrap:wrap;
      gap:0.4rem;
      margin-top:0.15rem;
    }

    .tag{
      font-size:0.78rem;
      border:1px solid var(--border);
      color:var(--muted);
      padding:0.2rem 0.45rem;
      border-radius:999px;
      background:#fafafa;
    }

    .album-actions{
      margin-top:auto;
      display:flex;
      gap:0.5rem;
      flex-wrap:wrap;
    }

    .btn{
      display:inline-block;
      text-decoration:none;
      border-radius:10px;
      padding:0.55rem 0.75rem;
      font-weight:bold;
      font-size:0.92rem;
      border:1px solid var(--brand);
      color:#fff;
      background:var(--brand);
    }

    .btn:hover{
      opacity:0.92;
    }

    .empty{
      background:var(--card);
      border:1px dashed var(--border);
      border-radius:var(--radius);
      padding:1.25rem;
      color:var(--muted);
      text-align:center;
      display:none;
    }

    .policy{
      margin-top:0.75rem;
      font-size:0.9rem;
      color:var(--muted);
    }

    footer{
      text-align:center;
      color:var(--muted);
      padding:1.25rem 1rem 2rem;
      font-size:0.9rem;
    }
  </style>
</head>

<body>
  <header>
    <h1>Troop 234 Photos</h1>
    <p>Albums by event. Newest first.</p>
  </header>

  <main>
    <div class="controls">
      <div class="left">
        <div>
          <label for="yearFilter">Year</label><br/>
          <select id="yearFilter">
            <option value="all">All</option>
          </select>
        </div>

        <div>
          <label for="catFilter">Category</label><br/>
          <select id="catFilter">
            <option value="all">All</option>
          </select>
        </div>
      </div>

      <div class="right">
        <div style="width:100%;">
          <label for="searchBox">Search</label><br/>
          <input id="searchBox" type="search" placeholder="Search albums..." />
        </div>
      </div>
    </div>

    <p class="hint">Tip: Resize cover images (example: 1600px wide) so the troop website loads fast on phones.</p>

    <div id="albumGrid" class="grid"></div>

    <div id="emptyState" class="empty">
      No albums match your filters.
    </div>

    <div class="policy">
      Photo policy: We only post photos for Scouts and families who gave permission. If you want a photo removed, contact the troop.
    </div>
  </main>

  <footer>
    Â© Troop 234 Chesapeake
  </footer>

  <script>
    /*
      HOW TO ADD AN ALBUM
      1) Put images in a folder, example: albums/2026-02-freeze-o-ree/
      2) Make a simple album page in that folder named index.html (or link to Google Photos).
      3) Add an entry below.

      cover: representative image for the album (recommended file name: cover.jpg)
      url: where the View Album button should go
    */

    const albums = [
      {
        title: "Freeze-O-Ree",
        date: "2026-02-21",
        year: "2026",
        category: "Camping",
        location: "Tidewater Council",
        count: 42,
        cover: "albums/2026-02-freeze-o-ree/cover.jpg",
        url: "albums/2026-02-freeze-o-ree/index.html"
      },
      {
        title: "Oasis Social Ministry Service Day",
        date: "2026-02-07",
        year: "2026",
        category: "Service",
        location: "Portsmouth, VA",
        count: 28,
        cover: "albums/2026-02-oasis-service/cover.jpg",
        url: "albums/2026-02-oasis-service/index.html"
      },
      {
        title: "Court of Honor",
        date: "2026-01-15",
        year: "2026",
        category: "Court of Honor",
        location: "Chesapeake, VA",
        count: 35,
        cover: "albums/2026-01-coh/cover.jpg",
        url: "albums/2026-01-coh/index.html"
      }
    ];

    // Sort newest first by date
    albums.sort((a, b) => (b.date || "").localeCompare(a.date || ""));

    const yearFilter = document.getElementById("yearFilter");
    const catFilter = document.getElementById("catFilter");
    const searchBox = document.getElementById("searchBox");
    const albumGrid = document.getElementById("albumGrid");
    const emptyState = document.getElementById("emptyState");

    function uniqueValues(key){
      const set = new Set(albums.map(a => a[key]).filter(Boolean));
      return Array.from(set).sort((a, b) => (b + "").localeCompare(a + ""));
    }

    function fillSelect(selectEl, values){
      values.forEach(v => {
        const opt = document.createElement("option");
        opt.value = v;
        opt.textContent = v;
        selectEl.appendChild(opt);
      });
    }

    function matchesFilters(album){
      const yearVal = yearFilter.value;
      const catVal = catFilter.value;
      const q = (searchBox.value || "").trim().toLowerCase();

      if (yearVal !== "all" && album.year !== yearVal) return false;
      if (catVal !== "all" && album.category !== catVal) return false;

      if (q){
        const hay = [
          album.title, album.location, album.category, album.year, album.date
        ].filter(Boolean).join(" ").toLowerCase();
        if (!hay.includes(q)) return false;
      }

      return true;
    }

    function formatDate(iso){
      if (!iso || iso.length < 10) return "";
      const parts = iso.split("-");
      if (parts.length !== 3) return iso;

      const y = parts[0];
      const m = Number(parts[1]);
      const d = Number(parts[2]);

      const months = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];
      const mm = months[m - 1] || parts[1];

      return `${mm} ${d}, ${y}`;
    }

    function card(album){
      const div = document.createElement("div");
      div.className = "album";

      const img = document.createElement("img");
      img.className = "cover";
      img.src = album.cover || "";
      img.alt = album.title ? `${album.title} cover` : "Album cover";
      img.loading = "lazy";
      img.onerror = function(){
        this.style.display = "none";
      };

      const body = document.createElement("div");
      body.
